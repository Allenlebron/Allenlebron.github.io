---
layout:     post
title:      JAVA中的并发容器之ConcurrentHashMap
subtitle:   java.util.concurrent
date:       2018-11-24
author:     zwilpan
header-img: img/post-bg-debug.png
catalog: true
tags:
    - JAVA并发
---

## 如何保证容器是线程安全？ConcurrentHashMap如何实现高效的线程安全

Java提供了不同层面的线程安全支持.在传统集合框架内部,除了内部HashTable等同步容器，还提供了所谓的同步包装器（synchronized Wrapper）,我们可以调用Collections工具类提供的包装方法,来获取一个同步的包装容器(如Collections.synchronizedMap),但是它们都是非常粗粒度的同步方式,在高并发的情况下效率很低.更加普遍的选择是利用并发包中提供的线程安全容器类,它提供了:  
各种并发容器类：比如ConcurrentHashMap、CopyOnWriteArrayList  
各种线程安全队列Queue/Deque:比如ArrayBlockingQueue、SynchronousQueue  
各种有序容器的线程安全版本  

具体保证线程安全的方式,包括从简单的synchronized的方式,到基于更加精细化的，比如基于分离锁实现的ConcurrentHashMap等并发实现等.具体选择看开发的实际场景,总体来说,并发包内提供的容器通用实现远优于早期的简单同步实现
